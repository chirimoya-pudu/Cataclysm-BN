{
  "version": 2,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 20,
    "patch": 0
  },
  "configurePresets": [
    {
      "name": "windows-tiles-sounds-x64-msvc",
      "binaryDir": "${sourceDir}/out/build/${presetName}",
      "displayName": "Windows Tiles Sounds x64 MSVC",
      "description": "Target Windows (64-bit) with the Visual Studio 2022 development environment.",
      "generator": "Visual Studio 17 2022",
      "cacheVariables": {
        "CMAKE_PROJECT_INCLUDE_BEFORE": "${sourceDir}/build-scripts/${presetName}.cmake",
        "CMAKE_TOOLCHAIN_FILE": "${sourceDir}/build-scripts/MSVC.cmake",
        "VCPKG_TARGET_TRIPLET": "x64-windows-static",
        "DYNAMIC_LINKING": "False",
        "CMAKE_CONFIGURATION_TYPES": "Debug;RelWithDebInfo;Release",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "CURSES": "False",
        "LOCALIZE": "True",
        "TILES": "True",
        "SOUND": "True",
        "TESTS": "True",
        "JSON_FORMAT": "ON",
        "CMAKE_INSTALL_MESSAGE": "NEVER"
      }
    },
    {
      "name": "linux-curses",
      "binaryDir": "${sourceDir}/out/build/${presetName}",
      "displayName": "Linux Slim Build (Curses)",
      "description": "Target Linux.",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_C_COMPILER": "clang",
        "CMAKE_CXX_COMPILER": "clang++",
        "CMAKE_AR": "llvm-ar",
        "CMAKE_RANLIB": "llvm-ranlib",
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "CURSES": "ON",
        "TILES": "OFF",
        "SOUND": "OFF",
        "USE_PREFIX_DATA_DIR": "OFF",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "LINKER": "mold",
        "USE_TRACY": "OFF"
      }
    },
    {
      "name": "linux-slim",
      "binaryDir": "${sourceDir}/out/build/${presetName}",
      "displayName": "Linux Slim Build (Tiles, Sounds)",
      "description": "Target Linux. Recommended for new contributors.",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_C_COMPILER": "clang",
        "CMAKE_CXX_COMPILER": "clang++",
        "CMAKE_AR": "llvm-ar",
        "CMAKE_RANLIB": "llvm-ranlib",
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "CURSES": "OFF",
        "TILES": "ON",
        "SOUND": "ON",
        "USE_PREFIX_DATA_DIR": "OFF",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "LINKER": "mold",
        "USE_TRACY": "OFF"
      }
    },
    {
      "name": "linux-full",
      "binaryDir": "${sourceDir}/out/build/${presetName}",
      "displayName": "Linux Full Build (Tiles, Sounds, Clang-Tidy, Tracy)",
      "description": "Target Linux with clang-tidy plugin, and Tracy profiling support",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_C_COMPILER": "clang",
        "CMAKE_CXX_COMPILER": "clang++",
        "CMAKE_AR": "llvm-ar",
        "CMAKE_RANLIB": "llvm-ranlib",
        "CMAKE_INSTALL_PREFIX": "$env{XDG_DATA_HOME}",
        "JSON_FORMAT": "ON",
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "CURSES": "OFF",
        "TILES": "ON",
        "SOUND": "ON",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "CATA_CLANG_TIDY_PLUGIN": "ON",
        "BACKTRACE": "ON",
        "LIBBACKTRACE": "ON",
        "LINKER": "mold",
        "USE_XDG_DIR": "ON",
        "USE_HOME_DIR": "OFF",
        "USE_PREFIX_DATA_DIR": "OFF",
        "USE_TRACY": "ON",
        "TRACY_VERSION": "master",
        "TRACY_ON_DEMAND": "ON",
        "TRACY_ONLY_IPV4": "ON"
      }
    },
    {
      "name": "linux-cross-aarch64",
      "binaryDir": "${sourceDir}/out/build/${presetName}",
      "generator": "Ninja",
      "environment": { "PKG_CONFIG_LIBDIR": "/usr/lib/aarch64-linux-gnu/pkgconfig" },
      "cacheVariables": {
        "CMAKE_SYSTEM_NAME": "Linux",
        "CMAKE_SYSTEM_PROCESSOR": "aarch64",
        "CMAKE_CXX_FLAGS": "--target=aarch64-linux-gnu --gcc-toolchain=/usr -I/usr/include/aarch64-linux-gnu",
        "CMAKE_C_FLAGS": "--target=aarch64-linux-gnu --gcc-toolchain=/usr -I/usr/include/aarch64-linux-gnu",
        "CMAKE_BUILD_WITH_INSTALL_RPATH": "ON",
        "CMAKE_INSTALL_RPATH_USE_LINK_PATH": "ON",
        "CMAKE_FIND_ROOT_PATH": "/usr/lib/aarch64-linux-gnu",
        "CMAKE_FIND_ROOT_PATH_MODE_PACKAGE": "BOTH",
        "CMAKE_FIND_ROOT_PATH_MODE_LIBRARY": "BOTH",
        "CMAKE_FIND_ROOT_PATH_MODE_INCLUDE": "BOTH",
        "CMAKE_LIBRARY_PATH": "/usr/lib/aarch64-linux-gnu",
        "CMAKE_INCLUDE_PATH": "/usr/include/aarch64-linux-gnu"
      }
    },
    { "name": "linux-slim-cross-aarch64", "inherits": ["linux-slim", "linux-cross-aarch64"] },
    { "name": "linux-full-cross-aarch64", "inherits": ["linux-full", "linux-cross-aarch64"] },
    {
      "name": "dist-tiles",
      "binaryDir": "${sourceDir}/build",
      "displayName": "Linux Distribution (Tiles, Sounds, Languages)",
      "description": "For creating portable distribution packages with tiles and sound.",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_BUILD_TYPE": "Release",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "CURSES": "OFF",
        "TILES": "ON",
        "SOUND": "ON",
        "LANGUAGES": "all",
        "BACKTRACE": "ON",
        "LIBBACKTRACE": "ON",
        "JSON_FORMAT": "ON",
        "LINKER": "mold",
        "USE_PREFIX_DATA_DIR": "OFF"
      }
    },
    {
      "name": "dist-curses",
      "binaryDir": "${sourceDir}/build",
      "displayName": "Linux Distribution (Curses, Languages)",
      "description": "For creating portable distribution packages with curses.",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_BUILD_TYPE": "Release",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "CURSES": "ON",
        "TILES": "OFF",
        "SOUND": "OFF",
        "LANGUAGES": "all",
        "BACKTRACE": "ON",
        "LIBBACKTRACE": "ON",
        "JSON_FORMAT": "ON",
        "LINKER": "mold",
        "USE_PREFIX_DATA_DIR": "OFF"
      }
    },
    {
      "name": "lint",
      "binaryDir": "${sourceDir}/build",
      "displayName": "Lint and Format Only",
      "description": "Minimal build for running formatting targets (astyle, style-json).",
      "generator": "Ninja",
      "cacheVariables": {
        "CATA_CCACHE": "ON",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_BUILD_TYPE": "Debug",
        "CURSES": "OFF",
        "TILES": "OFF",
        "SOUND": "OFF",
        "TESTS": "OFF",
        "JSON_FORMAT": "ON"
      }
    },
    {
      "name": "ci-curses",
      "binaryDir": "${sourceDir}/build",
      "displayName": "CI Build (Curses)",
      "description": "CI build configuration for curses with GCC.",
      "generator": "Ninja",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "gcc-14",
        "CMAKE_CXX_COMPILER": "g++-14",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "TILES": "OFF",
        "CURSES": "ON",
        "SOUND": "OFF",
        "LOCALIZE": "OFF",
        "BACKTRACE": "ON",
        "LIBBACKTRACE": "ON",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "JSON_FORMAT": "ON",
        "TESTS": "ON",
        "LINKER": "mold"
      }
    },
    {
      "name": "ci-tiles",
      "binaryDir": "${sourceDir}/build",
      "displayName": "CI Build (Tiles, Sound)",
      "description": "CI build configuration for tiles and sound with GCC.",
      "generator": "Ninja",
      "cacheVariables": {
        "CMAKE_C_COMPILER": "gcc-14",
        "CMAKE_CXX_COMPILER": "g++-14",
        "CMAKE_C_COMPILER_LAUNCHER": "ccache",
        "CMAKE_CXX_COMPILER_LAUNCHER": "ccache",
        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "TILES": "ON",
        "CURSES": "OFF",
        "SOUND": "ON",
        "LOCALIZE": "ON",
        "LANGUAGES": "all",
        "BACKTRACE": "ON",
        "LIBBACKTRACE": "OFF",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "JSON_FORMAT": "OFF",
        "TESTS": "ON",
        "LINKER": "mold"
      }
    }
  ],
  "buildPresets": [
    {
      "name": "windows-msvc-build",
      "configurePreset": "windows-tiles-sounds-x64-msvc",
      "targets": ["cataclysm-bn-tiles", "cata_test-tiles", "json_formatter", "translations"],
      "description": "Build for Windows with tiles and sounds using MSVC."
    },
    {
      "name": "linux-curses",
      "configurePreset": "linux-curses",
      "description": "The minimal curses build preset for Linux."
    },
    {
      "name": "linux-slim",
      "configurePreset": "linux-slim",
      "description": "The minimal build preset for Linux. Recommended for new contributors."
    },
    {
      "name": "linux-full",
      "configurePreset": "linux-full",
      "description": "The canonical build preset for Linux. This is the one used by the devteam."
    },
    {
      "name": "linux-slim-cross-aarch64",
      "configurePreset": "linux-slim-cross-aarch64",
      "description": "The minimal build preset for Linux aarch64."
    },
    {
      "name": "linux-full-cross-aarch64",
      "configurePreset": "linux-full-cross-aarch64",
      "description": "The canonical build preset for Linux aarch64."
    },
    {
      "name": "dist-tiles",
      "configurePreset": "dist-tiles",
      "targets": ["cataclysm-bn-tiles", "json_formatter", "translations"],
      "description": "Build for tiles distribution."
    },
    {
      "name": "dist-curses",
      "configurePreset": "dist-curses",
      "targets": ["cataclysm-bn", "json_formatter", "translations"],
      "description": "Build for curses distribution."
    },
    {
      "name": "lint",
      "configurePreset": "lint",
      "targets": ["json_formatter"],
      "description": "Build formatting tools only."
    },
    {
      "name": "ci-curses",
      "configurePreset": "ci-curses",
      "targets": ["cataclysm-bn", "cata_test"],
      "description": "CI build for curses."
    },
    {
      "name": "ci-tiles",
      "configurePreset": "ci-tiles",
      "targets": ["cataclysm-bn-tiles", "cata_test-tiles"],
      "description": "CI build for tiles and sound."
    }
  ]
}
